<!DOCTYPE html>
<html>

<head>
    <title>template</title>
    <meta http-equiv="Content-type" content="text/html;charset=utf-8" />
    <meta name="Description" content="Learning Rust Wasm/Webassembly programming and having fun">
    <meta name="author" content="https://github.com/bestia-dev">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/bestia01.css">
    <script>
        /* Toggle between adding and removing the "responsive" class to navbar when the user clicks on the hamburger */
        function toggle_responsive_navbar() {
            var x = document.getElementById("navbar");
            if (x.className.includes(" responsive")) {
                x.className = x.className.replace(" responsive", "");
            } else {
                x.className += " responsive";
            }
        }
    </script>
</head>

<body>
    <div class="fixed_header">
        <div id="navbar">
            <a id="navbar_brand" href="https://bestia.dev">
                <img src="bestia_icon.png" alt="Bestia development" title="bestia.dev" />
                <span id="navbar_title"> Bestia dev</span>
            </a>
            <a id="navbar_hamburger" href="javascript:void(0);" onclick="toggle_responsive_navbar()">☰ </a>
            <div id="navbar_topics">
                <a href="/index.html#home" onclick="toggle_responsive_navbar()">Home </a>
                <a href="/index.html#tutorials" onclick="toggle_responsive_navbar()">Tutorials</a>
                <a href="/index.html#games" onclick="toggle_responsive_navbar()">Games</a>
                <a href="/index.html#productivity" onclick="toggle_responsive_navbar()">Productivity</a>
                <a href="/index.html#contact" onclick="toggle_responsive_navbar()">Contact</a>
            </div>
        </div>
    </div>

<article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-cargo_crev_reviews" class="anchor" aria-hidden="true" href="#cargo_crev_reviews"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cargo_crev_reviews</h1>
<p dir="auto"><strong>Write cargo-crev reviews in GUI with a cross-platform app written in full-stack Rust</strong><br>
<em><strong>version: 2022.512.1751 date: 2022-05-12 author: <a href="https://bestia.dev" rel="nofollow">bestia.dev</a> repository: <a href="https://github.com/bestia-dev/cargo_crev_reviews_workspace">Github</a></strong></em></p>
<p dir="auto"><a href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/"><img src="https://camo.githubusercontent.com/df18c8293b9fcb042666e6b71f2a0cdf9004ec7ad287f51b2d4e4e1a7afa0589/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e65735f696e5f527573742d323934382d677265656e2e737667" alt="Lines in Rust code" data-canonical-src="https://img.shields.io/badge/Lines_in_Rust-2948-green.svg" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/"><img src="https://camo.githubusercontent.com/9a37d25c7f8cea9fc67a3078ef93173f866678fdf1f1205597c84edb4818a73c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e65735f696e5f446f635f636f6d6d656e74732d3630362d626c75652e737667" alt="Lines in Doc comments" data-canonical-src="https://img.shields.io/badge/Lines_in_Doc_comments-606-blue.svg" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/"><img src="https://camo.githubusercontent.com/14aa595a8bca1d9327aa558fec99da235b52b2dc07c422f76dd54bc469878b75/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e65735f696e5f636f6d6d656e74732d3234322d707572706c652e737667" alt="Lines in Comments" data-canonical-src="https://img.shields.io/badge/Lines_in_comments-242-purple.svg" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/"><img src="https://camo.githubusercontent.com/ca23628eb99142a21cb1c4d2691f8eb74e53f9731e50ebd3dab96f4ea3baa96b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e65735f696e5f6578616d706c65732d302d79656c6c6f772e737667" alt="Lines in examples" data-canonical-src="https://img.shields.io/badge/Lines_in_examples-0-yellow.svg" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/"><img src="https://camo.githubusercontent.com/12f2d1173e3fc6d307cc8c337ef133376e43a5d29246b56c01b4d86209d99cfa/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e65735f696e5f74657374732d32372d6f72616e67652e737667" alt="Lines in tests" data-canonical-src="https://img.shields.io/badge/Lines_in_tests-27-orange.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://crates.io/crates/cargo_crev_reviews" rel="nofollow"><img src="https://camo.githubusercontent.com/25770046bfbec3f91c271fa31dbc8e9d280be812aa4bb360a9ab5583bcd71b9f/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f636172676f5f637265765f726576696577732e737667" alt="crates.io" data-canonical-src="https://img.shields.io/crates/v/cargo_crev_reviews.svg" style="max-width: 100%;"></a> <a href="https://docs.rs/cargo_crev_reviews/" rel="nofollow"><img src="https://camo.githubusercontent.com/87f9510a8ab861cca5341b0ff41a70174cfdde270f477205cce1672e65a5b049/68747470733a2f2f646f63732e72732f636172676f5f637265765f726576696577732f62616467652e737667" alt="Documentation" data-canonical-src="https://docs.rs/cargo_crev_reviews/badge.svg" style="max-width: 100%;"></a> <a href="https://web.crev.dev/rust-reviews/crate/cargo_crev_reviews/" rel="nofollow"><img src="https://camo.githubusercontent.com/460430cc7d2b3ffef9234a29d723fb7480de9276fefc233591fc46bbb63389b5/68747470733a2f2f7765622e637265762e6465762f727573742d726576696577732f62616467652f637265765f636f756e742f636172676f5f637265765f726576696577732e737667" alt="crev reviews" data-canonical-src="https://web.crev.dev/rust-reviews/badge/crev_count/cargo_crev_reviews.svg" style="max-width: 100%;"></a> <a href="https://lib.rs/crates/cargo_crev_reviews/" rel="nofollow"><img src="https://camo.githubusercontent.com/9164bfcebc9eb586a3b2e00e2d0d9a768b5c32960d5a66b68db582b15168f5b9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c69622e72732d727573742d6f72616e67652e737667" alt="Lib.rs" data-canonical-src="https://img.shields.io/badge/Lib.rs-rust-orange.svg" style="max-width: 100%;"></a> <a href="https://github.com/bestia-dev/cargo_crev_reviews/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/83d3746e5881c1867665223424263d8e604df233d0a11aae0813e0414d433943/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg" style="max-width: 100%;"></a> <a href="https://hits.seeyoufarm.com" rel="nofollow"><img src="https://camo.githubusercontent.com/869caa7d22cd87ce1eb562b6dc7d3ac491c12f9d732b6642de21e1b092a804dd/68747470733a2f2f686974732e736565796f756661726d2e636f6d2f6170692f636f756e742f696e63722f62616467652e7376673f75726c3d68747470732533412532462532466769746875622e636f6d2532466265737469612d646576253246636172676f5f637265765f726576696577735f776f726b7370616365253246747265652532466d61696e253246636172676f5f637265765f7265766965777326636f756e745f62673d253233373943383344267469746c655f62673d2532333535353535352669636f6e3d2669636f6e5f636f6c6f723d253233453745374537267469746c653d6869747326656467655f666c61743d66616c7365" alt="Hits" data-canonical-src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fbestia-dev%2Fcargo_crev_reviews_workspace%2Ftree%2Fmain%2Fcargo_crev_reviews&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=hits&amp;edge_flat=false" style="max-width: 100%;"></a></p>
<p dir="auto">Hashtags: #rustlang #buildtool #developmenttool #crev #review #fullstack #gui #clientserver</p>
<h2 dir="auto"><a id="user-content-try-it" class="anchor" aria-hidden="true" href="#try-it"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Try it</h2>
<p dir="auto">Video tutorial on youtube: <a href="https://bestia.dev/youtube/cargo_crev_reviews_workspace.html" rel="nofollow">https://bestia.dev/youtube/cargo_crev_reviews_workspace.html</a></p>
<p dir="auto">Install cargo_crev_reviews:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cargo install cargo_crev_reviews"><pre>cargo install cargo_crev_reviews</pre></div>
<p dir="auto">Go to a Rust project directory where the Cargo.toml file is, and start the program:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cd ~/rustprojects/your-project-name
cargo_crev_reviews"><pre><span class="pl-c1">cd</span> <span class="pl-k">~</span>/rustprojects/your-project-name
cargo_crev_reviews</pre></div>
<p dir="auto">And follow the simple instructions...</p>
<p dir="auto">Backend CLI in Linux terminal:<br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/raw/main/images/screen_5.png"><img src="https://github.com/bestia-dev/cargo_crev_reviews_workspace/raw/main/images/screen_5.png" alt="screen_5" title="screen_5" style="max-width: 100%;"></a><br>
Frontend GUI in browser:<br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/raw/main/images/screen_6.png"><img src="https://github.com/bestia-dev/cargo_crev_reviews_workspace/raw/main/images/screen_6.png" alt="screen_6" title="screen_6" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-cargo-tree" class="anchor" aria-hidden="true" href="#cargo-tree"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cargo tree</h2>
<p dir="auto">Cargo-tree is a Rust utility that shows all the ramification of dependencies in your Rust project. It is included inside the cargo utility.</p>
<h2 dir="auto"><a id="user-content-your-personal-reviews" class="anchor" aria-hidden="true" href="#your-personal-reviews"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>your personal reviews</h2>
<p dir="auto">Your personal reviews are the most important. Ideally, you want to personally review every crate, rate it and write something about it for your own use. You want to know that the dependencies your program is using are not malicious or unsound. If you have a boss, he will sooner or later ask you if you reviewed all the dependencies. With <code>cargo_crev_reviews</code> you have a basic tool to do that.</p>
<p dir="auto">Don't panic!</p>
<p dir="auto">To write a review you need to see the exact source code and other metadata about the crate. Click on the crate name in the list and it will open:</p>
<ul dir="auto">
<li>VSCode in the directory with a copy of the original dependency source code</li>
<li><a href="https://web.crev.dev/rust-reviews/crates/" rel="nofollow">crev.dev</a> for other people reviews</li>
<li>crates.io for basic information</li>
<li>lib.rs for extended information</li>
<li>a list of all versions of that crate with your reviews added</li>
</ul>
<p dir="auto">Be warned that modern browsers block pop-ups and you have to allow that explicitly for this site <code>127.0.0.1</code>.<br>
If you don't have VSCode, you can change the code_editor in the <code>Config</code> menu.</p>
<h2 dir="auto"><a id="user-content-reputation-vs-code-review" class="anchor" aria-hidden="true" href="#reputation-vs-code-review"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reputation vs. code review</h2>
<p dir="auto">Personally, I think that the reputation of the author is important. For some highly visible and respected members of the Rust community I don't review the code. The reputation of the author is enough to make me feel safe. This method is not perfect, because there can be identity theft or a faulty version. But I still think that it is an efficient and effective method for me.<br>
Crates.io made a confusion with authors and owners. Lately they introduced the <code>published_by</code> field for every published version. For me this is the main person responsible for any eventual issue of this specific published version. Crates.io guarantees that published versions cannot be modified later. They are read-only, so you know that you see exactly the right code.</p>
<h2 dir="auto"><a id="user-content-share-it-with-the-community" class="anchor" aria-hidden="true" href="#share-it-with-the-community"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Share it with the community</h2>
<p dir="auto">When you are satisfied with your own reviews, you then publish them for other developers to read. In the same way, reviews from other developers help you when analyzing the dependencies. More people that write reviews, better the information we get for our decisions.<br>
One crate can have many versions. Every version is separately reviewed. Often, the review will be just the same for many versions, but that is good. When a developer wants to see the reviews for a specific version, he does not need to watch the reviews of all other versions of the same crate.</p>
<h2 dir="auto"><a id="user-content-tldr" class="anchor" aria-hidden="true" href="#tldr"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TL;DR</h2>
<p dir="auto">For developers that want to understand, tweak the code and contribute to the project, below is a long description of the important aspects of the project. If you are only a user of <code>cargo_crev_reviews</code>, you don't need to read all of this.</p>
<h2 dir="auto"><a id="user-content-motivation" class="anchor" aria-hidden="true" href="#motivation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Motivation</h2>
<p dir="auto">I think <a href="https://lib.rs/crates/cargo-crev" rel="nofollow">cargo-crev</a> is a great tool to express trustworthiness in the open-source community, especially for the <a href="https://www.rust-lang.org/" rel="nofollow">Rust programming language</a>.  I fear so much of <a href="https://en.wikipedia.org/wiki/Supply_chain_attack" rel="nofollow">supply chain attacks</a> using dependencies from <a href="https://crates.io/" rel="nofollow">crates.io</a>. For the smallest project you can get 100 dependencies easily. How to trust them all? To review them all manually? It is just crazy.<br>
But if enough people write reviews, it will be so much easier to trust the code. It is the same principle as <a href="https://www.booking.com/" rel="nofollow">booking.com</a> or <a href="https://www.airbnb.com/" rel="nofollow">air-bnb</a>. Guests of a hotel write a review about their actual experience in the hotel. And you can read a hopefully truthful review and can understand if the hotel is good or bad. Sometimes can happen to find a fake review, but if there is enough people, most of them will be sincere.<br>
Sadly, writing reviews in <code>cargo-crev</code> is hard. Let's make a <a href="https://en.wikipedia.org/wiki/Graphical_user_interface" rel="nofollow">GUI</a> wrapper around <code>cargo-crev</code> to make write reviews easier.<br>
We will see walking the path what obstacles we must overcome.</p>
<h2 dir="auto"><a id="user-content-technical-decisions" class="anchor" aria-hidden="true" href="#technical-decisions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Technical decisions</h2>
<p dir="auto">Rust does not have a true GUI story. It is mostly for <a href="https://en.wikipedia.org/wiki/Command-line_interface" rel="nofollow">CLI</a> and libraries. Because GUI is mostly non cross-platform. But Rust is the best language for <a href="https://webassembly.org/" rel="nofollow">Wasm/Webassembly</a>. So let's combine this.<br>
I will make a Rust <a href="https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html" rel="nofollow">workspace</a> (multi-projects):</p>
<ol dir="auto">
<li>CLI for a web server (local micro-server)</li>
<li>Wasm for the browser (chrome and similar)</li>
</ol>
<p dir="auto">The web server CLI will access files, commands, libraries and the network. This will work only in <a href="https://en.wikipedia.org/wiki/Linux" rel="nofollow">Linux</a>, but today Win10 has integrated Linux with <a href="https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux" rel="nofollow">WSL2</a>. It will work just fine on all the operating systems sensible for Rust development.<br>
Wasm in browser will just access the local micro web server. This is gonna be the GUI and because the browser works in every <a href="https://en.wikipedia.org/wiki/Operating_system" rel="nofollow">OS</a>, this is <a href="https://en.wikipedia.org/wiki/Cross-platform_software" rel="nofollow">cross-platform</a> development.</p>
<p dir="auto">I want the simplest <a href="https://en.wikipedia.org/wiki/Web_server" rel="nofollow">web server</a> ever. It will be used exclusively locally from one super simple <a href="https://en.wikipedia.org/wiki/Web_application" rel="nofollow">web-application</a>, so  don't need to care much about security. I choose <a href="https://crates.io/crates/simple-server" rel="nofollow">simple server</a> from the <a href="https://doc.rust-lang.org/1.30.0/book/second-edition/ch20-01-single-threaded.html" rel="nofollow">Rust book</a>. I don't care about <a href="https://en.wikipedia.org/wiki/Multithreading_(computer_architecture)" rel="nofollow">multi-threading</a> or <a href="https://en.wikipedia.org/wiki/Asynchrony_(computer_programming)" rel="nofollow">async</a> , because it will be used by only one browser. The example from the book evolved into the github repository of the author of the book <a href="https://github.com/steveklabnik/simple-server">github.com/steveklabnik</a>. I cloned it and update the dependencies and consequently fixed some broken code. I published it as dev_bestia_simple_server on crates.io.</p>
<p dir="auto">For the browser I will create a simple web app. All the code will be in Rust, I will avoid javascript. The GUI will be in <a href="https://en.wikipedia.org/wiki/HTML5" rel="nofollow">HTML5</a> and <a href="https://en.wikipedia.org/wiki/CSS#CSS_3" rel="nofollow">CSS3</a>. This is all supported by all <a href="https://www.bopdesign.com/bop-blog/2012/01/why-use-a-modern-web-browser/" rel="nofollow">modern browsers</a>.</p>
<h2 dir="auto"><a id="user-content-development" class="anchor" aria-hidden="true" href="#development"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h2>
<p dir="auto">I will use <a href="https://crates.io/crates/cargo-auto" rel="nofollow">cargo-auto</a> to automate the tasks needed to build the project.<br>
The sub-directory <code>automation_tasks_rs</code> is the Rust project for <a href="https://crates.io/crates/cargo-auto" rel="nofollow">cargo-auto</a>.<br>
My project <a href="https://github.com/bestia-dev/dev_bestia_cargo_completion">dev_bestia_cargo_completion</a> helps with bash auto-completion.</p>
<p dir="auto">The Rust workspace is made of members:</p>
<ul dir="auto">
<li>backend CLI (this will be the main and only project to be published on crates.io)</li>
<li>GUI frontend</li>
</ul>
<p dir="auto">The sub-directory <code>web_server_folder</code> contains all the files and folder structure for a working development web_server.<br>
But this files are not used directly. Because of the way the publish to crates.io works, I will embed them inside the Rust code as strings (base64 encoded if needed). I will make an automation task for that.</p>
<p dir="auto">There is a file <code>auto_generated_mod.rs</code> where automation tasks generates boilerplate code. I prefer generated code to <code>procedural macros</code> because it is easy to write(generate), read and debug the code. Also the tools for auto-completion can have problems with procedural macros.</p>
<h2 dir="auto"><a id="user-content-backend---cargo_crev_reviews" class="anchor" aria-hidden="true" href="#backend---cargo_crev_reviews"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>backend - cargo_crev_reviews</h2>
<p dir="auto">This is a micro-web-server intended for local use with only one local browser connected to it.<br>
It is the backend of the application <code>cargo_crev_reviews</code>. I had to use the same name here.<br>
Together the backend and the frontend form a complete application that is cross-platform.<br>
They share some structs for communication that are defined in the <code>common_structs_mod</code> module. One automation task copies the content from backend to frontend projects to keep them in sync.<br>
The only URL the server operates is: <a href="http://127.0.0.1:8182/cargo_crev_reviews" rel="nofollow">http://127.0.0.1:8182/cargo_crev_reviews</a></p>
<p dir="auto">The web server CLI will access files, commands, libraries and the network.  For the signing process of crev reviews it need the crev passphrase. This can be entered interactively or with the env variable <code>_export CREV_PASSPHRASE=your_passphrase</code>.<br>
Add a space before the export command to avoid the secret to be saved in the bash history.</p>
<p dir="auto">If I want to publish this on crates.io it must all be inside one binary executable file.<br>
It means that all the static files: css, html, icons, images, ... must be inside the Rust code.<br>
For developing it is practical to have all this files as files.<br>
But before release an automation task converts this files to strings and put them into the Rust code.</p>
<p dir="auto">The micro-server will accept mostly <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" rel="nofollow">POST</a> with json similar to  <a href="https://www.jsonrpc.org/specification" rel="nofollow">json-rpc</a>. But sure I had to modify it to something more adequate for my use-case. I think in the future I will change that even more to something even more adequate.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Syntax:

--&gt; data sent to Server - request
&lt;-- data sent to Client - response

rpc call with named parameters:

--&gt; {
&quot;request_method&quot;: &quot;subtract_calculate&quot;, 
&quot;request_data&quot;: {
    &quot;subtrahend&quot;: 23, 
    &quot;minuend&quot;: 42, 
    }
}

&lt;-- {
&quot;response_method&quot;: &quot;subtract_show&quot;, 
&quot;response_data&quot;: {
    &quot;subtracted&quot;: 19,     
    },
&quot;response_html&quot;:&quot;...&quot;    
}"><pre>Syntax:

--<span class="pl-k">&gt;</span> data sent to Server - request
<span class="pl-k">&lt;</span>-- data sent to Client - response

rpc call with named parameters:

--<span class="pl-k">&gt;</span> {
<span class="pl-s"><span class="pl-pds">"</span>request_method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>subtract_calculate<span class="pl-pds">"</span></span>, 
<span class="pl-s"><span class="pl-pds">"</span>request_data<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>subtrahend<span class="pl-pds">"</span></span>: 23, 
    <span class="pl-s"><span class="pl-pds">"</span>minuend<span class="pl-pds">"</span></span>: 42, 
    }
}

<span class="pl-k">&lt;</span>-- {
<span class="pl-s"><span class="pl-pds">"</span>response_method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>subtract_show<span class="pl-pds">"</span></span>, 
<span class="pl-s"><span class="pl-pds">"</span>response_data<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>subtracted<span class="pl-pds">"</span></span>: 19,     
    },
<span class="pl-s"><span class="pl-pds">"</span>response_html<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>    
}</pre></div>
<p dir="auto">An example how to test a POST request with curl:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="curl -d '{&quot;request_method&quot;: &quot;subtract&quot;, &quot;request_data&quot;: {&quot;subtrahend&quot;: 23, &quot;minuend&quot;: 42}}' -H 'Content-Type: application/json' http://127.0.0.1:8182/cargo_crev_reviews"><pre>curl -d <span class="pl-s"><span class="pl-pds">'</span>{"request_method": "subtract", "request_data": {"subtrahend": 23, "minuend": 42}}<span class="pl-pds">'</span></span> -H <span class="pl-s"><span class="pl-pds">'</span>Content-Type: application/json<span class="pl-pds">'</span></span> http://127.0.0.1:8182/cargo_crev_reviews</pre></div>
<p dir="auto">There are also a small number of GET requests for static files mostly to start the communication between the browser and the server.<br>
TODO: one day I will add also a websocket communication, so the client can show a progress bar for actions processing on the server.</p>
<h2 dir="auto"><a id="user-content-gui-frontend---cargo_crev_reviews_wasm" class="anchor" aria-hidden="true" href="#gui-frontend---cargo_crev_reviews_wasm"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>GUI frontend - cargo_crev_reviews_wasm</h2>
<p dir="auto">This simple web app is the GUI frontend of the application <code>cargo_crev_reviews</code>.<br>
It is strictly designed for use on desktops as it is a tool for programers. No need to do a mobile version. The response from the rpc server contains:</p>
<ol dir="auto">
<li>response method name</li>
<li>html template</li>
<li>data</li>
</ol>
<p dir="auto">The method name is used to match and call the appropriate function.<br>
The html template must be microXml compatible. The wasm code reads element by element and when finds a marker, inserts the data. I wanted the html template to be complete with some sample texts. So the markers are added in front of the element or attribute they are meant to replace.</p>
<h2 dir="auto"><a id="user-content-common-structs---common_structs_modrs" class="anchor" aria-hidden="true" href="#common-structs---common_structs_modrs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>common structs - common_structs_mod.rs</h2>
<p dir="auto">Common structures between backend and frontend. It is kind of a contract for communication.<br>
All in 100% Rust language. One automation task keeps in sync the backend and frontend module.<br>
TODO: Using structs is not generic enough. Most of the time I need then name of a field. Because with the name I can bind in different scenarios. Using structs I don't have the name of the field at runtime. I think I will ditch most of the structs to have just a plain old flat text with QVS21. Inside that text every field will have a slice and a name. And I can then use that in runtime for bindings.</p>
<h2 dir="auto"><a id="user-content-cargo-crev-integration" class="anchor" aria-hidden="true" href="#cargo-crev-integration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cargo-crev integration</h2>
<p dir="auto">The <a href="https://github.com/crev-dev/cargo-crev">cargo-crev</a> project contains many crates. The crates <code>crev-lib</code> and <code>crev-data</code> are libraries for integration. All the code working with crev is encapsulated in the crev_mod.rs module.</p>
<h2 dir="auto"><a id="user-content-cargo-registry" class="anchor" aria-hidden="true" href="#cargo-registry"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cargo registry</h2>
<p dir="auto">The cargo application is essential for work with the Rust language. Cargo maintains a local <code>cargo registry</code> in the directory <code>~/.cargo/registry/</code>. It has 3 basic sub-directories: index, cache and src.<br>
The <code>registry index</code> is the database with crates metadata and is git fetched from github. Path to an index file:<br>
<code>~/.cargo/registry/index/github.com-1ecc6299db9ec823/cache/re/ad/reader_for_microxml</code></p>
<p dir="auto">The content of this file looks like this:</p>
<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bc688d353fc7c7a2f3f1f5fed9a27fc1773fc710
1.0.0 {
    &quot;name&quot;: &quot;reader_for_microxml&quot;,
    &quot;vers&quot;: &quot;1.0.0&quot;,
    &quot;deps&quot;: [],
    &quot;cksum&quot;: &quot;623616f68a6441e2f61aa01c9bbcf76f4c9989328e0e10ab747e936718791912&quot;,
    &quot;features&quot;: {},
    &quot;yanked&quot;: true,
    &quot;links&quot;: null
}
1.1.11 {
    &quot;name&quot;: &quot;reader_for_microxml&quot;,
    &quot;vers&quot;: &quot;1.1.11&quot;,
    &quot;deps&quot;: [],
    &quot;cksum&quot;: &quot;fd50abb1f0d11a59ebe6d3f31446e4af8d0f8a7df668034b6c9b94453fa30c42&quot;,
    &quot;features&quot;: {},
    &quot;yanked&quot;: true,
    &quot;links&quot;: null
}"><pre><span class="pl-s">bc688d353fc7c7a2f3f1f5fed9a27fc1773fc710</span>
<span class="pl-s">1.0.0 {</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">name</span><span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>reader_for_microxml<span class="pl-pds">"</span></span><span class="pl-s">,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">vers</span><span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>1.0.0<span class="pl-pds">"</span></span><span class="pl-s">,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">deps</span><span class="pl-pds">"</span></span>: <span class="pl-s">[],</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">cksum</span><span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>623616f68a6441e2f61aa01c9bbcf76f4c9989328e0e10ab747e936718791912<span class="pl-pds">"</span></span><span class="pl-s">,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">features</span><span class="pl-pds">"</span></span>: <span class="pl-s">{},</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">yanked</span><span class="pl-pds">"</span></span>: <span class="pl-s">true,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">links</span><span class="pl-pds">"</span></span>: <span class="pl-c1">null</span>
<span class="pl-s">}</span>
<span class="pl-s">1.1.11 {</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">name</span><span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>reader_for_microxml<span class="pl-pds">"</span></span><span class="pl-s">,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">vers</span><span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>1.1.11<span class="pl-pds">"</span></span><span class="pl-s">,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">deps</span><span class="pl-pds">"</span></span>: <span class="pl-s">[],</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">cksum</span><span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>fd50abb1f0d11a59ebe6d3f31446e4af8d0f8a7df668034b6c9b94453fa30c42<span class="pl-pds">"</span></span><span class="pl-s">,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">features</span><span class="pl-pds">"</span></span>: <span class="pl-s">{},</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">yanked</span><span class="pl-pds">"</span></span>: <span class="pl-s">true,</span>
    <span class="pl-s"><span class="pl-pds">"</span><span class="pl-ent">links</span><span class="pl-pds">"</span></span>: <span class="pl-c1">null</span>
<span class="pl-s">}</span></pre></div>
<p dir="auto">Cargo downloads from crates.io the complete source code for every dependency it needs for your project.<br>
First it downloads the tar gz file ending with <code>.crate</code> into the cache directory:<br>
<code>~/.cargo/registry/cache/github.com-1ecc6299db9ec823/cargo_auto_lib-0.7.23.crate</code><br>
Probably the <code>cksum</code> field in the <code>registry index</code> is calculated from this <code>.crate</code> file.<br>
Then this is unpacked into the <code>src</code> folder as the complete source code directories and files:<br>
<code>~/.cargo/registry/src/github.com-1ecc6299db9ec823/</code>.<br>
<code>Crates.io</code> guarantees the <code>.crate</code> file for a crate+version cannot be altered or deleted and are always available for download from crates.io (even when yanked).<br>
We can review exactly this local code with confidence, because we know it will never change.<br>
This local files should not be altered in any way. But it can happen unknowingly and unwillingly, if we open a code editor with auto-complete in this folder. It will create the <code>target</code> folder and <code>Cargo.lock</code> file. It can happen also that <code>Go to definition</code> opens this files in the editor and maybe we alter some comment or code. This is no good.<br>
In the <code>config and utils</code> it is possible to do an integrity check that these files are not tempered. If something is modified it is easy to just remove that folder from <code>src</code>. The next time cargo needs these crates it will download and unpack automatically.</p>
<h2 dir="auto"><a id="user-content-cratesio-api" class="anchor" aria-hidden="true" href="#cratesio-api"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>crates.io API</h2>
<p dir="auto">Some data are not available locally in the cargo registry and need to be obtained from <a href="https://crates.io//api/v1/crates/%7B%7D/%7B%7D/" rel="nofollow">https://crates.io//api/v1/crates/{}/{}/</a>. Then I store them in <code>~/.config/crev/cargo_crev_reviews_data/db</code>. Data from crates.io are immutable all, except yanked. I will find in the local registry the data for yanked and new versions. That will trigger the download of data from crates.io.</p>
<h2 dir="auto"><a id="user-content-rustsec-cargo-audit" class="anchor" aria-hidden="true" href="#rustsec-cargo-audit"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>RustSec cargo audit</h2>
<p dir="auto">I added the result of <code>cargo audit --json</code> into the cargo tree list.</p>
<h2 dir="auto"><a id="user-content-trusted-publishers" class="anchor" aria-hidden="true" href="#trusted-publishers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>trusted publishers</h2>
<p dir="auto">There is a confusion on crates.io who is the owner, author or group that is responsible for a crate version. Lately they added a <code>published_by</code> field for a crate_version. That sounds more accurate. The one that published is responsible to check there is no malware inside.<br>
You can edit your list of Trusted publishers in the app.</p>
<h2 dir="auto"><a id="user-content-code-flow" class="anchor" aria-hidden="true" href="#code-flow"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code-flow</h2>
<p dir="auto">Everything is compiled into one single executable binary for Linux: <code>cargo_crev_reviews</code>.<br>
First it opens the default browser with <code>xdg-open</code> on <a href="http://127.0.0.1:8182/cargo_crev_reviews/index.html" rel="nofollow">http://127.0.0.1:8182/cargo_crev_reviews/index.html</a>.<br>
I received a comment that <code>xdg-open</code> is not preinstalled on every Linux distro. I use Debian 10 and have it.<br>
On other distros it is possible to install it with <code>xdg-utils</code>.<br>
You can also change it with the env variable <code>export CREV_BROWSER_PATH=/usr/bin/xdg-open</code> for the command that exists on your system. Later you can change this command in the Config menu.<br>
If your WSL2 does not have yet a default browser run this:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="ln -s &quot;/mnt/c/Program Files/Mozilla Firefox/firefox.exe&quot; /usr/bin/browser_in_win
export BROWSER='/usr/bin/browser_in_win'"><pre>ln -s <span class="pl-s"><span class="pl-pds">"</span>/mnt/c/Program Files/Mozilla Firefox/firefox.exe<span class="pl-pds">"</span></span> /usr/bin/browser_in_win
<span class="pl-k">export</span> BROWSER=<span class="pl-s"><span class="pl-pds">'</span>/usr/bin/browser_in_win<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">The command <code>ln -sf</code> is permanent and persistent. It makes a symbolic link file that stays there forever.<br>
But <code>export BROWSER=</code> is NOT persistent. You need to add this command to <code>~/.bashrc</code> that runs it on every start of terminal.</p>
<p dir="auto">In the next millisecond the web server starts listening to <code>127.0.0.1</code> port <code>8182</code>.<br>
The first set of requests are GET and response is "static" files embedded in auto_generated_files_mod.rs</p>
<ol dir="auto">
<li>browser request for <code>/cargo_crev_reviews/index.html</code> is GET, the response is html text file embedded in auto_generated_files_mod.rs in the function: <code>index_html()</code><br>
This html is just an empty shell that gets the css and wasm code. There is no real content inside. This concept is <a href="https://en.wikipedia.org/wiki/Single-page_application" rel="nofollow">Single-page application SPA</a>.</li>
<li>index.html requests: 3 css files, <code>pkg/cargo_crev_reviews.js</code>, <code>pkg/cargo_crev_reviews_bg.wasm</code>, "favicon" <code>icons/icon-032.png</code>. All these requests are GET and responses come from auto_generated_files_mod.rs functions, some are text files and others are base64 files.</li>
<li>the browser imports the wasm module and starts the init function that requests <code>request_cargo_tree_list</code>. This responds with: response_method_name, response_html and response_data.</li>
<li>wasm (inside the browser) is Rust code. First it matches method_name and calls the appropriate function. It processes the html with the data and inserts it into index.html (the empty shell).</li>
<li>the browser renders our first page. Hooray!</li>
<li>the user clicks on some button.</li>
<li>the macro <code>on_click!</code> or <code>row_on_click!</code> hides the ugly Rust code behind the definition of an event handler in web_sys and calls a function</li>
<li>wasm creates a rpc request and sends/POST to the server</li>
<li>the request is POST, the server first matches the method_name and calls the appropriate function. The function processes the call and prepares some data. It loads the html template.</li>
<li>The response contains the html to be rendered and data to be inserted in this html before rendering.</li>
</ol>
<h2 dir="auto"><a id="user-content-how-to-add-a-page-with-data" class="anchor" aria-hidden="true" href="#how-to-add-a-page-with-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to add a page with data</h2>
<h3 dir="auto"><a id="user-content-define-the-data-structs" class="anchor" aria-hidden="true" href="#define-the-data-structs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Define the data structs</h3>
<p dir="auto">In <code>common_structs_mod.rs</code> add the structs like:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#[derive(Serialize, Deserialize, Debug, Default)]
pub struct VersionItemData {
    pub crate_name: String,
    pub crate_version: String,
}

#[derive(Serialize, Deserialize, Debug, Default)]
pub struct VersionListData {
    pub list_of_version: Vec&lt;VersionItemData&gt;,
}"><pre><span class="pl-c"><span class="pl-c">#</span>[derive(Serialize, Deserialize, Debug, Default)]</span>
pub struct VersionItemData {
    pub crate_name: String,
    pub crate_version: String,
}

<span class="pl-c"><span class="pl-c">#</span>[derive(Serialize, Deserialize, Debug, Default)]</span>
pub struct VersionListData {
    pub list_of_version: Vec<span class="pl-k">&lt;</span>VersionItemData<span class="pl-k">&gt;</span>,
}</pre></div>
<h3 dir="auto"><a id="user-content-create-a-standard-html-page" class="anchor" aria-hidden="true" href="#create-a-standard-html-page"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Create a "standard" html page</h3>
<p dir="auto">The html page has to be MicroXml compatible, basically XHtml.  Copy for example <code>web_server_folder/review_list.html</code> to a new html file. Open this file with a browser to preview it. I use the VSCode extension <a href="https://marketplace.visualstudio.com/items?itemName=NoThlnG.vscode-open-wsl" rel="nofollow">vscode-open-wsl</a> and right-click on the file and <code>Open with default application</code>. In WSL2 I use my project <a href="https://github.com/bestia-dev/wsl_open_browser">wsl_open_browser</a> to open the default browser from wsl2 to Windows. Now edit the html file to your liking and reload the browser with F5 to see the changes. Use some sample text to make it look as close to what you want. These texts will be later programmatically replaced, but they are invaluable while designing a nice layout.</p>
<h3 dir="auto"><a id="user-content-add-markers" class="anchor" aria-hidden="true" href="#add-markers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Add markers</h3>
<p dir="auto">Inside the html you want to replace the sample texts with the data from the server. Before the text add the (invisible) marker for example <code>&lt;!--wt_crate_name--&gt;</code>. You can replace also an attribute if you insert an attribute before it like this <code>data-wt_variable_name="next_attribute_name"</code>.<br>
Now run the automation task <code>cargo auto build</code> that will copy/embed this file into <code>auto_generated_files_mod.rs</code>.</p>
<h3 dir="auto"><a id="user-content-write-a-server-functions" class="anchor" aria-hidden="true" href="#write-a-server-functions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Write a server functions</h3>
<p dir="auto">In <code>srv_methods_mod.rs</code> add a function like this:</p>
<div class="highlight highlight-source-gitignore notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#[named]
pub fn srv_function_name(request_data: serde_json::Value) -&gt; anyhow::Result&lt;String&gt; {
    log::info!(function_name!());
    let filter: ReviewFilterData = unwrap!(serde_json::from_value(request_data));
    let response_data  = get_some_data(filter)?;
    let response_html = crate::auto_generated_files_mod::review_edit_html();
    // cln_methods::cln_review_edit(response_data, response_html)
}"><pre><span class="pl-c"><span class="pl-c">#</span>[named]</span>
<span class="pl-e">pub</span> <span class="pl-e">fn</span> <span class="pl-e">srv_function_name(request_data:</span> <span class="pl-e">serde_json::Value)</span> <span class="pl-e">-&gt;</span> <span class="pl-e">anyhow::Result&lt;String&gt;</span> <span class="pl-e">{</span>
    <span class="pl-e">log::info!(function_name!());</span>
    <span class="pl-e">let</span> <span class="pl-e">filter:</span> <span class="pl-e">ReviewFilterData</span> <span class="pl-e">=</span> <span class="pl-e">unwrap!(serde_json::from_value(request_data));</span>
    <span class="pl-e">let</span> <span class="pl-e">response_data</span>  <span class="pl-e">=</span> <span class="pl-e">get_some_data(filter)</span><span class="pl-k">?</span><span class="pl-e">;</span>
    <span class="pl-e">let</span> <span class="pl-e">response_html</span> <span class="pl-e">=</span> <span class="pl-e">crate::auto_generated_files_mod::review_edit_html();</span>
    // <span class="pl-e">cln_methods::cln_review_edit(response_data,</span> <span class="pl-e">response_html)</span>
<span class="pl-e">}</span></pre></div>
<p dir="auto">Now run the automation task <code>cargo auto build</code> that generates <code>auto_generated_mod.rs</code>.</p>
<h3 dir="auto"><a id="user-content-client-module" class="anchor" aria-hidden="true" href="#client-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>client module</h3>
<p dir="auto">If I use a different struct for data, I must have different client modules and functions.<br>
With a generic data-struct all of this could be generic.<br>
TODO: use QVS21</p>
<p dir="auto">In <code>cln_version_mod.rs</code> add a client function like this:</p>
<div class="highlight highlight-source-gitignore notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pub fn cln_review_edit(srv_response: RpcResponse) {
    let html = extract_html(&amp;srv_response);
    store_to_review_item_data(srv_response);

    // the mutex is locked inside a scope. When this structure falls out of scope, the lock will be unlocked.
    let html_after_process = {
        let data = REVIEW_ITEM_DATA.lock().unwrap().deref();
        process_html(data, &amp;html)
    };

    inject_into_html(&amp;html_after_process);

    on_click!(&quot;button_review_save&quot;, request_review_save);
    on_click!(&quot;button_review_list&quot;, request_review_list);
}"><pre><span class="pl-e">pub</span> <span class="pl-e">fn</span> <span class="pl-e">cln_review_edit(srv_response:</span> <span class="pl-e">RpcResponse)</span> <span class="pl-e">{</span>
    <span class="pl-e">let</span> <span class="pl-e">html</span> <span class="pl-e">=</span> <span class="pl-e">extract_html(&amp;srv_response);</span>
    <span class="pl-e">store_to_review_item_data(srv_response);</span>

    // <span class="pl-e">the</span> <span class="pl-e">mutex</span> <span class="pl-e">is</span> <span class="pl-e">locked</span> <span class="pl-e">inside</span> <span class="pl-e">a</span> <span class="pl-e">scope.</span> <span class="pl-e">When</span> <span class="pl-e">this</span> <span class="pl-e">structure</span> <span class="pl-e">falls</span> <span class="pl-e">out</span> <span class="pl-e">of</span> <span class="pl-e">scope,</span> <span class="pl-e">the</span> <span class="pl-e">lock</span> <span class="pl-e">will</span> <span class="pl-e">be</span> <span class="pl-e">unlocked.</span>
    <span class="pl-e">let</span> <span class="pl-e">html_after_process</span> <span class="pl-e">=</span> <span class="pl-e">{</span>
        <span class="pl-e">let</span> <span class="pl-e">data</span> <span class="pl-e">=</span> <span class="pl-e">REVIEW_ITEM_DATA.lock().unwrap().deref();</span>
        <span class="pl-e">process_html(data,</span> <span class="pl-e">&amp;html)</span>
    <span class="pl-e">};</span>

    <span class="pl-e">inject_into_html(&amp;html_after_process);</span>

    <span class="pl-e">on_click!("button_review_save",</span> <span class="pl-e">request_review_save);</span>
    <span class="pl-e">on_click!("button_review_list",</span> <span class="pl-e">request_review_list);</span>
<span class="pl-e">}</span></pre></div>
<h2 dir="auto"><a id="user-content-sled-database" class="anchor" aria-hidden="true" href="#sled-database"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>sled database</h2>
<p dir="auto">I don't want to repeatedly use crates.io api for the same data. I need a disk persistent storage for this data.<br>
I will have a try with the <a href="http://sled.rs/" rel="nofollow">sled</a> database. A lightweight pure-Rust high-performance transactional embedded database. This is a key-value database. The value can be any struct. There can be multiple separate trees/keyspaces: crates, versions, reviews, yanked,....</p>
<h2 dir="auto"><a id="user-content-plantuml" class="anchor" aria-hidden="true" href="#plantuml"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>plantUml</h2>
<p dir="auto">Write your diagrams in code with plantUml. The language syntax is pretty easy.<br>
I have a code section for plantuml inside markers. Then an automation task in <code>cargo auto doc</code> generates the svg file and creates a link to it.</p>
<div class="highlight highlight-source-wsd notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="@startuml

package &quot;web server 127.0.0.1:8182&quot; {

  [cargo_crev_reviews.rs] -down- [lib.rs]
note left of cargo_crev_reviews.rs
input passphrase,
start TcpListener and web server,
open browser
end note
  [lib.rs] -down- [response_get_mod]
  [lib.rs] -down- [response_post_mod]
  [response_post_mod] -down- [auto_generated_mod]
note right
autogenerated boilerplate
matching and routing, 
client proxy functions
end note
  [auto_generated_mod] -down- [common_structs_mod]
    note right: shared between server and client
  [response_get_mod] -down- [auto_generated_files_mod]
    note left: files are embedded in code
}
package &quot;methods&quot; {
  [common_structs_mod] -down- [srv_methods_mod]
    note right: API endpoints

}
package &quot;data_storage&quot; {
  [srv_methods_mod] &lt;-down- [db_sled_mod]
  note left 
  trees: crates, version, yanked, review 
  stored in \~/.config/crev/cargo_crev_reviews_data
  end note
  [srv_methods_mod] -down-&gt; [crev_mod] : save review
  [db_sled_mod] &lt;-down- [crev_mod]
  [db_sled_mod] &lt;-down- [cargo_registry_mod]
  [db_sled_mod] &lt;-down- [crates_io_mod]
  [crev_mod] &lt;-down-&gt; (\~/.config/crev/)
  [cargo_registry_mod] &lt;-down- (\~/.cargo/registry)
  [crates_io_mod] &lt;-down- (⛅/crates.io/api/v1)
}
@enduml"><pre><span class="pl-k">@startuml</span>

<span class="pl-k">package</span> <span class="pl-s">"web server 127.0.0.1:8182"</span> {

  [<span class="pl-c1">cargo_crev_reviews</span><span class="pl-k">.</span><span class="pl-c1">rs</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">lib</span><span class="pl-k">.</span><span class="pl-c1">rs</span>]
<span class="pl-c1">note</span> <span class="pl-c1">left</span> <span class="pl-c1">of</span> <span class="pl-c1">cargo_crev_reviews</span><span class="pl-k">.</span><span class="pl-c1">rs</span>
<span class="pl-c1">input</span> <span class="pl-c1">passphrase</span>,
<span class="pl-c1">start</span> <span class="pl-c1">TcpListener</span> <span class="pl-c1">and</span> <span class="pl-c1">web</span> <span class="pl-c1">server</span>,
<span class="pl-c1">open</span> <span class="pl-c1">browser</span>
<span class="pl-c1">end</span> <span class="pl-c1">note</span>
  [<span class="pl-c1">lib</span><span class="pl-k">.</span><span class="pl-c1">rs</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">response_get_mod</span>]
  [<span class="pl-c1">lib</span><span class="pl-k">.</span><span class="pl-c1">rs</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">response_post_mod</span>]
  [<span class="pl-c1">response_post_mod</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">auto_generated_mod</span>]
<span class="pl-k">note right</span>
autogenerated boilerplate
matching and routing, 
client proxy functions
<span class="pl-k">end note</span>
  [<span class="pl-c1">auto_generated_mod</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">common_structs_mod</span>]
    <span class="pl-k">note right</span>: shared between server and client
  [<span class="pl-c1">response_get_mod</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">auto_generated_files_mod</span>]
    <span class="pl-k">note left</span>: files are embedded in code
}
<span class="pl-k">package</span> <span class="pl-s">"methods"</span> {
  [<span class="pl-c1">common_structs_mod</span>] <span class="pl-k">-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">srv_methods_mod</span>]
    <span class="pl-k">note right</span>: API endpoints

}
<span class="pl-k">package</span> <span class="pl-s">"data_storage"</span> {
  [<span class="pl-c1">srv_methods_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">db_sled_mod</span>]
  <span class="pl-k">note left</span> 
  trees: crates, version, yanked, review 
  stored in \~/.config/crev/cargo_crev_reviews_data
  <span class="pl-k">end note</span>
  [<span class="pl-c1">srv_methods_mod</span>] <span class="pl-k">-<span class="pl-c1">down</span>-&gt;</span> [<span class="pl-c1">crev_mod</span>] : save review
  [<span class="pl-c1">db_sled_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">crev_mod</span>]
  [<span class="pl-c1">db_sled_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">cargo_registry_mod</span>]
  [<span class="pl-c1">db_sled_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-</span> [<span class="pl-c1">crates_io_mod</span>]
  [<span class="pl-c1">crev_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-&gt;</span> (<span class="pl-k">\~</span>/<span class="pl-k">.</span><span class="pl-c1">config</span>/<span class="pl-c1">crev</span>/)
  [<span class="pl-c1">cargo_registry_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-</span> (<span class="pl-k">\~</span>/<span class="pl-k">.</span><span class="pl-c1">cargo</span>/<span class="pl-c1">registry</span>)
  [<span class="pl-c1">crates_io_mod</span>] <span class="pl-k">&lt;-<span class="pl-c1">down</span>-</span> (⛅/<span class="pl-c1">crates</span><span class="pl-k">.</span><span class="pl-c1">io</span>/<span class="pl-c1">api</span>/<span class="pl-c1">v1</span>)
}
<span class="pl-k">@enduml</span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/bestia-dev/cargo_crev_reviews_workspace/raw/main/images/svg_s3icSOMh3Tz6Fs0E7X-OY_mExPpR5Ov74jkJ8cSDRhw.svg"><img src="https://github.com/bestia-dev/cargo_crev_reviews_workspace/raw/main/images/svg_s3icSOMh3Tz6Fs0E7X-OY_mExPpR5Ov74jkJ8cSDRhw.svg" alt="svg_s3icSOMh3Tz6Fs0E7X-OY_mExPpR5Ov74jkJ8cSDRhw" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-bad-surprise-on-wsl2" class="anchor" aria-hidden="true" href="#bad-surprise-on-wsl2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bad surprise on WSL2</h2>
<p dir="auto">My git repository got corrupted. It looks that this happens to many people on WSL2.<br>
The cure is:</p>
<div class="highlight highlight-source-batchfile notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# backup the repo first!
find .git/objects/ -type f -empty | xargs rm
git fetch -p
git fsck --full"><pre># backup the repo first!
<span class="pl-k">find</span> .git/objects/ -type f -empty <span class="pl-k">|</span> xargs rm
git fetch -p
git fsck --full</pre></div>
<h2 dir="auto"><a id="user-content-some-other-info" class="anchor" aria-hidden="true" href="#some-other-info"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Some other info</h2>
<p dir="auto">Cargo-crev knows also about Issues and Advisories. But for this project I focused only on Reviews. You can rate the version as Negative if there is something really broken with it.
I also limited the crates source to only <code>crates.io</code>. Other sources are not publicly interesting.</p>
<h2 dir="auto"><a id="user-content-cargo-crev-reviews-and-advisory" class="anchor" aria-hidden="true" href="#cargo-crev-reviews-and-advisory"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cargo crev reviews and advisory</h2>
<p dir="auto">We live in times of danger with <a href="https://en.wikipedia.org/wiki/Supply_chain_attack" rel="nofollow">supply chain attacks</a>.<br>
It is recommended to always use <a href="https://github.com/crev-dev/cargo-crev">cargo-crev</a><br>
to verify the trustworthiness of each of your dependencies.<br>
Please, spread this info.<br>
You can also read reviews quickly on the web:<br>
<a href="https://web.crev.dev/rust-reviews/crates/" rel="nofollow">https://web.crev.dev/rust-reviews/crates/</a></p>
<h2 dir="auto"><a id="user-content-open-source-and-free-as-a-beer" class="anchor" aria-hidden="true" href="#open-source-and-free-as-a-beer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>open-source and free as a beer</h2>
<p dir="auto">My open-source projects are free as a beer (MIT license).<br>
I just love programming.<br>
But I need also to drink. If you find my projects and tutorials helpful,<br>
please buy me a beer donating on my <a href="https://paypal.me/LucianoBestia" rel="nofollow">paypal</a>.<br>
You know the price of a beer in your local bar ;-)<br>
So I can drink a free beer for your health :-)<br>
<a href="https://translate.google.com/?hl=en&amp;sl=sl&amp;tl=en&amp;text=Na%20zdravje&amp;op=translate" rel="nofollow">Na zdravje!</a> <a href="https://dictionary.cambridge.org/dictionary/italian-english/alla-salute" rel="nofollow">Alla salute!</a> <a href="https://dictionary.cambridge.org/dictionary/german-english/prost" rel="nofollow">Prost!</a> <a href="https://matadornetwork.com/nights/how-to-say-cheers-in-50-languages/" rel="nofollow">Nazdravlje!</a> <g-emoji class="g-emoji" alias="beers" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f37b.png">🍻</g-emoji></p>
</article>
</body>

</html>